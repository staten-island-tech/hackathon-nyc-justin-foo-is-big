<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NYC Memory Match</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1>ðŸ§  NYC Landmark Memory Match ðŸ§ </h1>
    <p>Match all the pairs to win!</p>
    <div id="game-board"></div>

    <!-- JavaScript remains unchanged -->
    <script>
        const board = document.getElementById('game-board');
        let firstCard = null;
        let lockBoard = false;
        let matchedPairs = 0;

        async function fetchLandmarks() {
            const res = await fetch('/api/landmarks');
            const data = await res.json();
            return data;
        }

        function createCard(landmark, index) {
            const card = document.createElement('div');
            card.classList.add('card');
            card.dataset.name = landmark.name;
            card.dataset.index = index;
            card.textContent = 'ðŸ—½'; // Hidden face

            card.addEventListener('click', () => handleCardClick(card, landmark));
            return card;
        }

        function handleCardClick(card, landmark) {
            if (lockBoard || card.classList.contains('revealed') || card.classList.contains('matched')) return;

            card.classList.add('revealed');
            card.textContent = landmark.name;

            if (!firstCard) {
                firstCard = card;
                return;
            }

            if (firstCard.dataset.name === card.dataset.name && firstCard !== card) {
                firstCard.classList.add('matched');
                card.classList.add('matched');
                matchedPairs++;

                if (matchedPairs === 8) {
                    setTimeout(() => {
                        alert('ðŸŽ‰ You matched all the NYC landmarks! ðŸŽ‰');
                        location.reload();
                    }, 500);
                }
            } else {
                lockBoard = true;
                setTimeout(() => {
                    firstCard.classList.remove('revealed');
                    card.classList.remove('revealed');
                    firstCard.textContent = 'ðŸ—½';
                    card.textContent = 'ðŸ—½';
                    lockBoard = false;
                }, 1000);
            }

            firstCard = null;
        }

        async function initGame() {
            const landmarks = await fetchLandmarks();
            landmarks.forEach((landmark, index) => {
                const card = createCard(landmark, index);
                board.appendChild(card);
            });
        }

        initGame();
    </script>
</body>
</html>
